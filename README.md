# üìò API Gateway Rate Limiting ‚Äî README

## üß≠ –û–±—â–∞—è —Ü–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ API Gateway —Å –≥–∏–±–∫–∏–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ (rate limiting). –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –ø–æ IP, —Ä–µ–≥–∏–æ–Ω—É, user-agent –∏ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, –∞ —Ç–∞–∫–∂–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—É—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

## üìå –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- Rate Limiting —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- Circuit Breaker + Retry Logic
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞–º–∏ –∏ –ª–æ–≥–∞–º–∏
- Redis ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- REST API –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤
- Frontend: Dashboard + Log Viewer + Limit Admin
- –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Load Simulator

## üìà –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS

Gateway –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞ –ø–æ IP/—Ä–µ–≥–∏–æ–Ω—É, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 429 –∏ –Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç backend.

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–Ω–ª–∞–π–Ω-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

–ê–¥–º–∏–Ω —Å–Ω–∏–∂–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ —Ä–µ–≥–∏–æ–Ω—É —á–µ—Ä–µ–∑ UI –±–µ–∑ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ Gateway.

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏–º—É–ª—è—Ç–æ—Ä ‚Üí Gateway —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ ‚Üí –∞–¥–º–∏–Ω–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Load Simulator

- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Gateway
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π rps, —Ä–µ–≥–∏–æ–Ω, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 2. API Gateway

- Middleware: Rate Limiting, Retry, Circuit Breaker
- –ü—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ HttpClient

### 3. Rate Limit Config

- JSON-–∫–æ–Ω—Ñ–∏–≥ ‚Üí Redis ‚Üí Live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 4. Redis

- INCR + EXPIRE –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤

### 5. Logging & Metrics

- Serilog ‚Üí —Ñ–∞–π–ª (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 –∑–∞–ø–∏—Å–µ–π)
- –°–æ–¥–µ—Ä–∂–∏—Ç: –≤—Ä–µ–º—è, IP, —Ä–µ–≥–∏–æ–Ω, —Å—Ç–∞—Ç—É—Å, –∑–∞–¥–µ—Ä–∂–∫–∞

### 6. MonitoringService

- REST API: `/logs`, `/metrics`, `/limits`
- CRUD –ø–æ –ª–∏–º–∏—Ç–∞–º, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ª–æ–≥–æ–≤

### 7. Frontend (React Admin Panel)

- Dashboard (–≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ RPS)
- Log Viewer (—Ç–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤)
- Limit Admin (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤)

---

## ‚úÖ MVP: –†–µ–∞–ª–∏–∑—É–µ–º–æ–µ

- Rate Limiting (2 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
- Retry Logic / Circuit Breaker
- JSON-–∫–æ–Ω—Ñ–∏–≥ + Redis
- –°–∏–º—É–ª—è—Ç–æ—Ä –Ω–∞–≥—Ä—É–∑–∫–∏ (.NET Console App)
- REST API + UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- README + DESIGN.md + –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–≤ –±—É–¥—É—â–µ–º)

- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Gateway
- –ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–Ω–∞—Å—Ç–æ—è—â–∏–π backend)
- Redis —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã (–Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫)
- Prometheus + Grafana
- –ë–î –¥–ª—è –ª–æ–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üß† –í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç   | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                       |
| ----------- | -------------------------------- |
| Backend     | .NET 8 / ASP.NET Core            |
| Frontend    | React + Recharts                 |
| –•—Ä–∞–Ω–∏–ª–∏—â–µ   | Redis                            |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | Serilog                          |
| –ú–µ—Ç—Ä–∏–∫–∏     | Prometheus + Grafana (–≤ –±—É–¥—É—â–µ–º) |
| –ö–æ–Ω—Ñ–∏–≥      | JSON                             |
| –ù–∞–≥—Ä—É–∑–∫–∞    | .NET Console App                 |

---

## üõ† –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

- `RateLimitingMiddleware` –≤ Gateway
- `IRateLimitingStrategy` (—Ä–∞—Å—à–∏—Ä—è–µ–º–æ)
- `IRateLimitStore` (–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Redis)
- REST API –¥–ª—è –ª–æ–≥–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤
- React SPA —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏: Dashboard, Log Viewer, Limit Editor

---

## üß© –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

- –ü–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ RL —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω–∏—Ç—å Redis (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IRateLimitStore`)
- –ü–ª–∞–≥–∏–Ω–Ω–∞—è Middleware-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- JWT / API Key (–≤ –±—É–¥—É—â–µ–º)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- Unit-—Ç–µ—Å—Ç—ã –Ω–∞ Rate Limiting, Retry, CB
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏
- –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã (–¥–æ 10.000 RPS)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å *(–≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –≤–µ—Ä—Å–∏–∏)*

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ (JWT, —Ä–æ–ª–∏)
- HTTPS-only
- –ó–∞—â–∏—Ç–∞ REST API –æ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

---

## üöÄ CI/CD –∏ –¥–µ–ø–ª–æ–π

- `docker-compose.yml` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Redis + Gateway + MonitoringService
- README-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- GitHub Actions (–≤ –±—É–¥—É—â–µ–º): build, test, push Docker image

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `README.md` ‚Äî —Ç–µ–∫—É—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
- `DESIGN.md` ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Å—Ö–µ–º—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞ (draw\.io –∏–ª–∏ png)
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–æ–ø–∏—Å–∞–Ω –≤ README)

---

## üîß –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
cd Gateway && dotnet build
cd MonitoringService && dotnet build

# –ó–∞–ø—É—Å–∫ Redis + —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up

# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
cd LoadSimulator
./LoadSimulator --rps 500 --duration 30 --region us-east
```

---

## üßë‚Äçüíª –ö–æ–Ω—Ç–∞–∫—Ç—ã / –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ .NET. –ê–≤—Ç–æ—Ä—ã: [].

